
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Automagical Thinking</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="Off and on (more off than on, recently) I lurk in the #rubyonrails IRC channel and try to be helpful. It&#8217;s sad to say, but it&#8217;s really &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://philcrissman.github.com/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Automagical Thinking" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Automagical Thinking</a></h1>
  
    <h2>I forgot what I was going to say here.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:philcrissman.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/08/how-to-read-error-messages-for-ruby-on-rails/">How to Read Error Messages for Ruby on Rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-08T00:00:00-06:00" pubdate data-updated="true">Nov 8<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/posts/stack.jpg" alt="stack" /></p>

<p>Off and on (more off than on, recently) I lurk in the #rubyonrails IRC channel and try to be helpful. It&#8217;s sad to say, but it&#8217;s really common that people have questions &#8211; something isn&#8217;t working &#8211; and when they post the error message that they&#8217;re getting, their problem (and its implicit solution) is written in plain English in the first few lines of the error message. Not every time of course, but more often than not, error messages are trying to tell you something, and you should listen to what they&#8217;re telling you.</p>

<p>The greatest possible help you can give someone who is having this sort of problem is to advise them to read the error messages and try to figure it out. It sounds a little harsh, shades of the RTFM-type of &#8220;help&#8221; that some communities are known for. But in the long run, it&#8217;s going to help the new developer a lot more to be able to read an error message than to simply ask you to read it for them.</p>

<p>That said, here&#8217;s some things to look for in some fairly common Ruby and/or Rails error messages:</p>

<h3>These are not the gems you&#8217;re looking for.</h3>

<p><code>[gem] not found</code>, not present, etc. : so, you think you have installed a gem or plugin. Make sure.</p>

<h3>You can&#8217;t <em>do</em> that with <em>this</em></h3>

<p><code>no method error 'something' on SomeClass.</code> You&#8217;re trying to call a method on an object which does not actually have that method. Yes, I know, you think it does, but if it did, then your code would be working. So what is happening is that either you have a different object than you expected to have, or some Module which provides the method has not been included, or (if it&#8217;s an ActiveRecord object) the column or association you&#8217;re assuming is there is not actually there. Also, you may have spelled the method wrong, or it may be that the method you think is there doesn&#8217;t actually exist.</p>

<p>A variation of this is when you have <code>no method 'whatever' for NilClass</code>&#8230; the issue here is that the object you&#8217;re looking for (almost certainly an ActiveRecord object) was not found; there was no record with a given id in the scope you were searching. So nil is what you were calling the method on, and NilClass has surprisingly few methods to call its own.</p>

<p>A slight variation, somewhat related to the above case, is the error that you&#8217;re attempting to call the id for 4 which is nil, or some such confusing warning. Well, again, your object is nil. The id of nil is 4. Open up irb and check: the id (object_id, really) for nil is 4.</p>

<p>Other things that can cause a nil error in a controller action and/or view are: not actually setting a value for an instance variable, forgetting to pass a local variable to a partial, and things of that nature.</p>

<p>I thought I would be writing more, but most errors I can think of off the top of my head fall into one of these categories: a gem/library/plugin isn&#8217;t present, a no-method-error, and/or having an object be nil when you really expected it to be something else.</p>

<p>Bottom line:</p>

<p>Read the error messages.</p>

<p>Read the error messages.</p>

<p>Read the error messages.</p>

<h3>But the error message isn&#8217;t helping!</h3>

<p>Yeah, sometimes you just don&#8217;t know quite what the issue is. Or you can see what it is, but you aren&#8217;t sure <em>where</em> exactly it&#8217;s coming from. That&#8217;s where the stack trace comes it.</p>

<p>Most error messages are accompanied by a stack trace which lists the method calls that led to the error that occurred. By going back down the stack trace, you can generally find the exact file, the exact method, and even the exact line number, which is ultimately responsible for causing the error.</p>

<p>In Rails, most often (maybe not every time, but most often) the error will be in a file that you wrote, not one of the rails files. When I need to look through a stack trace for an error, I generally just start scanning down the list, skipping over any/all files that belong to a Rails core gem or library until I get to something in app/, config/, or lib/; basically, until I get to something that <em>I</em> wrote. Then I look for the line number, and most likely there I&#8217;ll find the reason the error was called.</p>

<h3>I still can&#8217;t figure out what&#8217;s wrong.</h3>

<p>Sometimes you just have to think about it for awhile. The key is, you have found the reason the error is being raised. You might <em>think</em> that your code is correct, but if an error is being raised, something isn&#8217;t right. It may be an assumption you&#8217;re using that isn&#8217;t really true, a typo, a logical error, a syntax error, but <em>somewhere</em>, there is a problem. If you get to your line of code which is responsible for the error and you still don&#8217;t know why it&#8217;s failing, (and a google search for the error and/or situation reveals nothing new), that might be a good time to ask for advice on IRC. You can also just start asking yourself: okay, I know this line of code is causing an error. Why would it be failing? What assumptions is this line of code making which may have turned out not be true? Would any of those assumptions cause this error?</p>

<p>&#8230; and so forth.</p>

<p>But again:</p>

<ul>
<li><p>Read the error message.</p></li>
<li><p>Read the stack trace.</p></li>
<li><p>Read your code.</p></li>
<li><p>Think about it.</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/22/one-does-not-simply-walk-into-mordor/">One Does Not Simply Walk Into Mordor</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-22T00:00:00-05:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://philcrissman.com/images/posts/walksintomordor.jpg" width="440" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/06/by-land-and-by-sea-and-by-reference/">By Land and by Sea and by Reference</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-06T00:00:00-05:00" pubdate data-updated="true">Oct 6<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/posts/travel_land_sea_air.jpg" width="440" />
<span style="font-size:0.8em"><a href="http://www.flickr.com/photos/hitchster/4118220915/">Photo source</a></span></p>

<p>I recently attempted to fit the quicksort algorithm into under 140 characters of Ruby. It looks like:</p>

<pre>
<code class="ruby">

def q(s);t=s.dup;t.size<=1 ? t :(p=t[i=t.size/2];t.delete_at(i);x,y=[],[];t.each{|e|e&lt;p ? x&lt;&lt;e : y&lt;&lt;e};n=q(x);m=q(y);n+[p]+m)end

</code>
</pre>


<p></p>

<p>That&#8217;s a little hard to read, so here&#8217;s the first working version I wrote before attempting to squeeze it into twitterable form:</p>

<pre>
<code class="ruby">
def quicksort(sequence)
  tmp = sequence.clone
  if tmp.count <= 1 
    return tmp
  else
    pivot_index = (tmp.count / 2)
    pivot = tmp[pivot_index]
    # pull the pivot out of the array.
    tmp.delete_at(pivot_index)
    
    # create 2 sub-sequences, one < pivot, one >= pivot
    sub_sequence_a = []
    sub_sequence_b = []
    tmp.each do |element|
      if element < pivot
        sub_sequence_a << element
      elsif element >= pivot
        sub_sequence_b << element
      end
    end

    # quicksort sub-sequence 1
    new_sub_sequence_a = quicksort(sub_sequence_a)
    
    # quicksort sub-sequence 2
    new_sub_sequence_b = quicksort(sub_sequence_b)
    
    # return sub1 plus pivot plus sub2
    new_sub_sequence_a + [pivot] + new_sub_sequence_b
  end
end
</code>
</pre>


<p>A key step in this implementation is pulling the pivot <em>out</em> of the array (see around line 9). In my first naive attempt at quicksort I just deleted the pivot right from <code>sequence</code>, the array object that is passed in to be sorted.</p>

<p>Anyone see the problem there?</p>

<p>At first, I sure didn&#8217;t. After all, I put the pivot back in the return value, right? (Second to last line.)</p>

<p>That does indeed ensure that the <em>returned</em>, <em>sorted</em> array has all the same elements as the original array. But the original array that I passed in would now have one less item. It would (did) lose an element every time I&#8217;d run my naive (read: incorrect) implementation of quicksort on it.</p>

<h3>WTF?</h3>


<p>Enter passing objects by reference. In Ruby, everything is passed by reference.(1) It can be easy to forget this, though, especially if you&#8217;re used to changing objects with the assignment (&#8220;=&#8221;) operator.</p>

<blockquote style="font-size:0.85em">
1 Just in case that&#8217;s not a familiar phrase, &#8220;by reference&#8221; refers to the idea that a reference to the <strong>actual object</strong> (like a pointer, if you will) is being passed, not just a copy of the object, or just the value of the object (which is called passing &#8220;by value&#8221;). (And no, by &#8220;pointer&#8221; I&#8217;m not talking about pointers in C/C++, I&#8217;m just trying to say that a reference <strong>refers to</strong> or in a sense, <strong>points to</strong>, the actual original object.)
</blockquote>


<p>For example:</p>

<pre>
<code class="ruby">
def reassign(obj)
  obj = "Not the same!"
end

#irb
> greeting = "Hello!"
=> "Hello!"
> reassign(greeting)
=> "Not the same!"
> puts greeting
Hello!
=> nil
</code>
</pre>


<p>So, assignment inside a method doesn&#8217;t change our object. Ruby must not <em>really</em> be passing a referece, right? Wrong, it sure is.</p>

<pre>
<code class="ruby">
def shiftit(obj)
  obj.shift
end

#irb
> h = {:foo => "bar", :bar => "baz", :baz => "qux"}
=> {:foo=>"bar",:bar =>"baz",:baz=>"qux"}
> a = [1,2,3,4,5,6]
=> [1,2,3,4,5,6]
> shiftit(h)
=> {:bar =>"baz",:baz=>"qux"}
> shiftit(a)
=> [2,3,4,5,6]
> # BUT WAIT
> h
=> {:bar =>"baz",:baz=>"qux"}
> a
=> [2,3,4,5,6]
</code>
</pre>


<p>Huh. How about that. Our original objects were changed when they were modified inside the method.</p>

<p>You&#8217;ll find that any method of modifying an object inside another method with actually change (even delete, if you go that far) the original object that you passed in. Ruby quite definitely, always, passed objects by reference.</p>

<h3>Then How come <em>assignment</em> in a method doesn&#8217;t change an object?</h3>


<p>That&#8217;s a good question. I was stumped on this one myself for a bit. The answer comes down to the idea of <em>bindings</em> and <em>scope</em>. When I tell Ruby that <code>foo = "bar"</code>, Ruby binds the local variable named <em>foo</em> to a String object, &#8220;bar&#8221;. foo is a String object, and when I pass it to my <code>reassign</code> method, I am passing a reference to the real object, <code>foo</code>.</p>

<p>However, inside the method, I&#8217;m in a new scope. When I type <code>foo = "Some new value"</code> inside the method scope, trying to reassign <code>foo</code>, Ruby sees that I&#8217;m binding foo to a new value; but from inside method scope, Ruby is not going to let me change the binding from another scope. So instead, Ruby figures that I want a local variable that is <em>also</em> named <code>foo</code>, inside my method scope, and it assigns my new value to the local <code>foo</code>, not the original <code>foo</code>.</p>

<p>I could alter it, still: if I changed the <code>reassign</code> method so that it did <code>obj.replace("Some new value!")</code> inside the method body, the original object would be changed, just like <code>shiftit</code> did to the array and the hash.</p>

<h3>I think I&#8217;m a clone, now</h3>


<p>Back to the quicksort implementation I started with: the way to get around this is to use .clone or .dup to get a <em>copy</em> of the object. That way you aren&#8217;t actually modifying the original object. Even when I realized this was happening, I still made the mistake of just doing <code>tmp = sequence</code> on my first try. No good; same exact problem. <code>tmp</code> is now just a reference straight to <code>sequence</code>, so altering <code>tmp</code> modifies <code>sequence</code> as well. Need to use <code>tmp = sequence.clone</code>, or something like it.</p>

<h3>That&#8217;s all I have to say about that</h3>


<p>Say it with me now: &#8220;Ruby passes objects by reference. <em>Ruby passes objects by reference.</em> Every time. <em>All the time.</em> <strong>By reference.</strong>&#8221;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/14/why-i-dont-like-location-based-services/">Why I Don&#8217;t Like Location Based Services</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-14T00:00:00-05:00" pubdate data-updated="true">Sep 14<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So, I&#8217;ve resisted being involved in <a href="http://foursquare.com">foursquare</a>, <a href="http://gowalla.com">gowalla</a>, yelp check-in, Facebook places, even geo-tagging twitter entries, et al.: all the &#8220;location&#8221; based check-in type services out there. There was always something I just didn&#8217;t care for about them.</p>

<p>Until recently, I&#8217;ve never really tried to say exactly <em>what</em> it is that I dislike about them. It isn&#8217;t simply the notion of saying where you are: I say where I am on twitter frequently. Am I a hypocrite? I don&#8217;t think so. But <em>why not</em>? What, you may ask, O Wise Phil Crissman, is the difference between saying where you are in a tweet, and in &#8216;checking in&#8217; with one of the afore-mentioned services?</p>

<p>What indeed.</p>

<h2>1. It can be really annoying. By frequency.</h2>


<p>Well, there is the frequency. By making it &#8220;easier&#8221; to broadcast your location, it&#8217;s not hard to see that this will increase the frequency with which a user does this. While I will probably only tweet my location at times where it is in some way, to my mind, significant, a user of the above services can easily broadcast their presence at the gas station, the library, the street corner, the adult bookstore, the bathroom, and the local dumpster. Just the fact of making it <em>easier</em> to do increases the amount of times users will do it, and therefore increases the level of <em>noise</em> in a given feed.</p>

<p><em>Why is it noise?</em> you may ask. <em>People care where I am. Besides, you already said you tweet your location sometimes. Is <strong>that</strong> noise?</em></p>

<p>If people think it&#8217;s noise, they can always unfollow me. But since I tweet my location <em>less frequently</em>, it&#8217;s also more likely to be a significant (to me, at least) location: I&#8217;m at <a href="http://www.loumalnatis.com/">Lou Malnati&#8217;s</a>. I&#8217;m at <a href="http://minnebar.org">minnebar</a>. I&#8217;m at <a href="http://cornerchurch.tv">Corner Church</a>. Whatever. The very fact that I don&#8217;t say <em>every single place I ever visit</em> makes the ones that I do mention&#8230; well, if nothing else, a better indicator of the things that I find important.</p>

<h2>2. It can be really annoying. By advertisement.</h2>


<p>There&#8217;s a good reason a lot of social media &amp; marketing types love these; because for brick and mortar businesses, they&#8217;re a marketers wet dream.</p>

<p>&#8220;What? Every single time a person goes to a <em>WHATEVER Coffee</em> they are willing to announce it to everyone who might happen to know them? &#8230; Wow! Free word of mouth advertising!&#8221;</p>

<p>There&#8217;s even built-in <em>incentive</em> to check-in to these places (thereby advertising them) more frequently. <em>You can be the mayor. Of Snowbutts Coffee. Isn&#8217;t that great? They might even give you 50% off a biscotti, which you wouldn&#8217;t have ordered otherwise, but hey, it&#8217;s a deal, right?</em></p>

<p>The next step from this, to my mind, is a service that lets you broadcast everytime you consume a TastyBeverage Cola (&#8220;I just had a TastyBeverage Cola, shared via Consumatron3000!&#8221;). They could even automate it; put an RFID on, well, basically everything, and just have your mobile device read it.</p>

<p><em>Oh boy. I just can&#8217;t wait for that to catch on, how about you?</em> :-(</p>

<p>Now, some of you might protest. You don&#8217;t <em>mind</em> advertising for some places. You <em>love</em> your Snowbutts coffee, and you think everyone else should be constantly reminded of how great it is. Not too much, though, or you might not be mayor anymore. But regardless. It&#8217;s <em>opt in</em>, you may say, and therefore valid and legit word of mouth.</p>

<p>Sure, okay. I get that. And you can do that. I just don&#8217;t feel like giving permission for my twitter feed to become a billboard for every <em>brandname</em> outlet I walk into. You go right ahead.</p>

<h2>3. It can be really annoying. Period.</h2>


<p>I know for sure of at least two, probably more, times where I&#8217;ve seen folks rhapsodizing about location-based services, and seen the sentiment that those of us who refuse to use them just don&#8217;t &#8220;get it&#8221;.</p>

<p>Well, aside from that marginally offending my geek pride (until I stop and consider the source), I think that idea is just plain wrong. I think people who refuse to participate in 4sq, et al. &#8220;get&#8221; the idea just fine. The very fact that they &#8220;get&#8221; what these services are about is the reason they refuse to use them. (I&#8217;m just hypothesizing, here, but you&#8217;ve read this far, just humor me.)</p>

<p>Look, I&#8217;m just as susceptible as anyone else in this western consumer society to &#8220;love&#8221; a brand or a commodity. I might tweet or talk about my favorite restaurants, tv shows, movies, or coffee brand. Sure; there are things I like, things I find worthwhile enough to be a willing word-of-mouth participant in their organic marketing. I just don&#8217;t want to automate it to the point where I fill my twitter (or other) feed with these things, increasing their frequency because of the subtle (or not so subtle) psychological/material rewards of being &#8220;mayor&#8221; or getting a free doodad from WhizBangDoodad store.</p>

<h2>In conclusion</h2>


<p>Once again, Mr. Horse put it best:</p>

<object width="439" height="272"><param name="movie" value="http://www.youtube.com/v/R6Mj1Us13Yk?fs=1&amp;hl=en_US&amp;color1=0x006699&amp;color2=0x54abd6"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/R6Mj1Us13Yk?fs=1&amp;hl=en_US&amp;color1=0x006699&amp;color2=0x54abd6" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="439" height="272"></embed></object>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/08/11/fun-with-the-major-scale/">Fun With the Major Scale</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-11T00:00:00-05:00" pubdate data-updated="true">Aug 11<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Got to chatting with Nate <a href="http://twitter.com/fowlduck">(@fowlduck)</a> about musical notation last night. He was pointing out that bits of the notation seem arbitrary and probably archaic, likening it to legacy code of a sort. For example, why no whole tone between B and C, E and F? This post is NOT meant to be a defense of music notation, a &#8220;setting straight&#8221; of anything, or even a definitive description of musical theory (at which I&#8217;m a rank amateur). It just got me thinking about the major scale and the circle of fourths &amp; fifths, which led to some playing around on the command line, which led to this. Enjoy.</p>

<p>The thing that makes it seem so strange is, at least in part, the major scale. The octave consists of twelve semi-tones, in which the major scale is set in this pattern: whole tone, whole tone, semitone, whole tone, whole tone, whole tone, whole tone, semi-tone. Like so:</p>

<pre>
  1   2   3   4   5   6   7   8   9   10  11  12  13
| C |   | D |   | E | F |   | G |   | A |   | B | C | ... (etc) 
</pre>


<p>The next root note (13th semi-tone, above) is only a semi-tone off from the last note of the scale. And so on. The semi-tone before or after any given note is a flat or a sharp respectively, giving rise to the B# == C, Cb == B, E# == F, Fb == E identities. So, let&#8217;s just accept the scale as a given; that this pattern of whole tones and semi-tones sounds pleasing to the ear.</p>

<p>So why is it C that has all natural notes (no sharps or flats)? Good question. That part, to me at least, does seem arbitrary, but effectively it doesn&#8217;t matter. Given the above system, the major scale in one key and one key only will have no sharps or flats. But still, why structure the notes this way? It still doesn&#8217;t necessarily seem to make sense.</p>

<p>There are a few reasons. For one, we want to be able to express every scale by naming off the notes, and we&#8217;d like each note to be a different letter. So we need 7 letters.</p>

<p>Where it gets really interesting is the circle of fourths and fifths.</p>

<p><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Circle_of_fifths_deluxe_4.svg/400px-Circle_of_fifths_deluxe_4.svg.png" /></p>

<p>So, if you go around clockwise, you&#8217;re counting by fifths (G is the fifth note of the C major scale, D is the fifth note of the G major scale, etc) and if you go around counter-clockwise you&#8217;re counting by fourths (F is the fourth note of C, Bb is the fourth note of F, etc). If you go around clockwise, each scale has one additional sharped note until you get to 180 degrees around, then it has n-1 flat notes, and loses one flat each fifth till you get back to C (no sharps or flats); vis versa the other direction. This is actually really cool; each scale, in addition to being unique in that, well, it has a different root note, is unique in that it is the only scale to have its specific number of sharps or flats. If a scale has 3 sharps, it&#8217;s A. Period. There isn&#8217;t another choice. Neat!</p>

<p>So for fun, we can explore the circle of fifths in the command line. First lets set it up:</p>

<pre>
<code class="ruby">
> circle = (0..11).map{|n| n*7%12 }
 => [0, 7, 2, 9, 4, 11, 6, 1, 8, 3, 10, 5] 
</code>
</pre>


<p>Well. That doesn&#8217;t mean a whole lot. How can we map it to notes? Let&#8217;s just construct a reference array really quick. (I&#8217;m making it an instance variable so I can use it in a method later; this was all done in irb.)</p>

<pre>
<code class="ruby">
> @notes = ["C", "C#/Db", "D", "D#/Eb", "E", "E#/F", "F#/Gb", "G", "G#/Ab", "A", "A#/Bb", "B/Cb"]
 => ["C", "C#/Db", "D", "D#/Eb", "E", "E#/F", "F#/Gb", "G", "G#/Ab", "A", "A#/Bb", "B/Cb"]
</code>
</pre>


<p>So, to read our circle, we&#8217;d do:</p>

<pre>
<code class="ruby">
> circle.map{|n| @notes[n]}
 => ["C", "G", "D", "A", "E", "B/Cb", "F#/Gb", "C#/Db", "G#/Ab", "D#/Eb", "A#/Bb", "E#/F"]
</code>
</pre>


<p>Hooray. The circle of fifths. Now, so what? Well, let&#8217;s make a little method to construct a major scale from the <code>@notes</code> variable. We&#8217;ll take a root note as an argument, so we can construct any major scale we like.</p>

<pre>
<code class="ruby">
> def major(root=0)
?>  offset = (0..11).map{|n| @notes[(n+root)%12]}
?>  [offset[0], offset[2], offset[4], offset[5], offset[7], offset[9], offset[11]].join(" ")
?>  end
 => nil
</code>
</pre>


<p>So, just calling <code>major</code> with no arguments should give us the C major scale; calling with, say, 5 should give us F major (5 in this case is the index of F in @notes; but you were already following that, I know):</p>

<pre>
<code class="ruby">
> major
 => "C D E E#/F G A B/Cb" 
> major(5)
 => "E#/F G A A#/Bb C D E" 

</code>
</pre>


<p>So we said that the circle of fifths added a sharp each increment, and then flipped to flats and removed on each increment. Let&#8217;s watch it happen:</p>

<pre>
<code class="">
>> circle.each{|n| puts major(n) }
C D E F G A B
G A B C D E F#/Gb
D E F#/Gb G A B C#/Db
A B C#/Db D E F#/Gb G#/Ab
E F#/Gb G#/Ab A B C#/Db D#/Eb
B C#/Db D#/Eb E F#/Gb G#/Ab A#/Bb
F#/Gb G#/Ab A#/Bb B C#/Db D#/Eb F
C#/Db D#/Eb F F#/Gb G#/Ab A#/Bb C
G#/Ab A#/Bb C C#/Db D#/Eb F G
D#/Eb F G G#/Ab A#/Bb C D
A#/Bb C D D#/Eb F G A
F G A A#/Bb C D E
</code>
</pre>


<p>Not as neat as it could look since I put the #/b both in the original notes array; the note you&#8217;d read would be the one with a consecutive letter after the previous note. So in G, the note following E is F#. In Eb, the note following G is Ab&#8230; and so on. The same note <em>letter</em> only appears once in any given scale. A sharp or flat is added or removed each increment you go around the circle.</p>

<p>I don&#8217;t have any startling conclusions to close this off with. Just that music is pretty cool, and that a few of the things that <em>seem</em> arbitrary just have to be that way &#8211; assuming we&#8217;re going to base the system around 12 equally tempered semitones (see <a href="http://en.wikipedia.org/wiki/Equal_temperament">Equal Temperment</a>, or even <a href="http://en.wikipedia.org/wiki/The_Well-Tempered_Clavier">Bach&#8217;s Well-Tempered Clavier</a> (evidently there&#8217;s some dispute over whether or not Bach&#8217;s intended tuning was equal or, uh, &#8220;well&#8221; tempered; I was not aware of this!)) and a 7 note major scale &#8211; neither of which are absolutely necessary, of course, and there are other ways to do it. See <a href="http://en.wikipedia.org/wiki/Mathematics_of_musical_scales#Mathematics_of_musical_scales">Mathematics of musical scales</a> and <a href="http://en.wikipedia.org/wiki/Musical_tuning#Tuning_systems">tuning systems</a> for more.</p>

<p>Happy musicking.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/08/06/push-it-somewhere-else/">Push It Somewhere Else</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-06T00:00:00-05:00" pubdate data-updated="true">Aug 6<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://philcrissman.com/images/posts/patrick-make-a-gist.jpg" width="440" /></p>

<p>For all the folks in #rubyonrails, and beyond.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/08/04/graffiti-on-a-train/">Graffiti on a Train</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-04T00:00:00-05:00" pubdate data-updated="true">Aug 4<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://philcrissman.com/images/posts/hbak_graffiti.jpg" width="440" /></p>

<p>Pic taken along the trail on the way from Minneapolis to Hopkins.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/29/rvm/">RVM</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-29T00:00:00-05:00" pubdate data-updated="true">Jul 29<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://philcrissman.com/images/posts/rvm_image.png" width="440" /></p>

<p>I gave a short presentation on <a href="http://rvm.beginrescueend.com">RVM</a> on Monday at <a href="http://ruby.mn">RUM</a>.</p>

<p>The slides can be found at <a href="http://rubymn-rvm.heroku.com">rubymn-rvm.heroku.com</a>.</p>

<p>Enjoy!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/28/faith/">Faith</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-28T00:00:00-05:00" pubdate data-updated="true">Jul 28<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://philcrissman.com/images/posts/vader_faith.jpg" width="440" /></p>

<p>I know, I know, the faux motivational poster is an old and tired <a href="http://en.wikipedia.org/wiki/Meme">meme</a>. Sorry.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/27/i-write-like/">I Write Like</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-27T00:00:00-05:00" pubdate data-updated="true">Jul 27<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve seen the <a href="http://iwl.me/">I write like</a> links show up on facebook and twitter a few times, so I decided I&#8217;d take a look. Not content to simply feed it one sample, I fed it the text from several of the posts from the archive. Here were the results:</p>

<ul>
<li><a href="http://philcrissman.com/2009/01/14/i-hold-strong-opinions-about-the-placement-of-curly-braces">I Hold Strong Opinions About The Placement Of Curly Braces</a></li>
<li><p>=> I write like: <strong>H.P. Lovecraft</strong>. <em>Really? Wait&#8230; what?</em></p></li>
<li><p><a href="http://philcrissman.com/2010/02/16/no-were-not-the-stupid-ones">No, We&#8217;re Not The Stupid Ones</a></p></li>
<li><a href="http://philcrissman.com/2009/01/16/in-which-i-am-no-longer-a-very-good-bachelor">In Which I Am No Longer A Very Good Bachelor</a></li>
<li><a href="http://philcrissman.com/2010/04/01/oracle-to-acquire-oracle">Oracle To Acquire Oracle</a></li>
<li><p>=> I write like: <strong>Cory Doctorow</strong>. <em>Huh. You think? Well, okay. Thanks!</em></p></li>
<li><p><a href="http://philcrissman.com/2006/09/22/the-emperors-new-web">The Emperor&#8217;s New Web</a></p></li>
<li>=> I write like: <strong>Jonathan Swift</strong>. <em>[blushing] No, no&#8230; you&#8217;re too kind.</em></li>
</ul>


<p>Not sure how they are analyzing the text and reaching their conclusions, but there&#8217;s at least a <em>little</em> bit of smarts in there; that last one, the one which was compared to Swift, is indeed a satire, though I&#8217;m not going to claim it&#8217;s in the calibre of Swift&#8217;s satire, but still; their algorithm picked something out of it which prompted the comparison. Not bad.</p>

<p>So, evidently, according to their analyses, I write most often like Cory Doctorow. I&#8217;ve only read <em>Down And Out In The Magic Kingdom</em>, and several of his blog posts/essays, but enough to consider it a compliment, though I&#8217;m not certain it&#8217;s deserved. Regardless, there we have it.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/10/12/how-to-quit-your-job/">How to quit your job</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/10/10/how-to-read-web-analytics/">How To Read Web Analytics</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/06/too-clever-to-debug/">Too Clever To Debug</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/03/10/current-desktop/">Current Desktop</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/02/21/test-first-as-a-productivity-hack/">Test First As A Productivity Hack</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/philcrissman">@philcrissman</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'philcrissman',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("philcrissman", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/philcrissman" class="twitter-follow-button" data-show-count="false">Follow @philcrissman</a>
  
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll&#8230;</ul>
  <p><a href="http://pinboard.in/u:philcrissman">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "philcrissman"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
